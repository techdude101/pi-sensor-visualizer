(this["webpackJsonppi-sensor-chart"]=this["webpackJsonppi-sensor-chart"]||[]).push([[0],{17:function(t,e,a){},19:function(t,e,a){},25:function(t,e,a){},26:function(t,e,a){"use strict";a.r(e);var r=a(1),n=a.n(r),i=a(9),s=a.n(i),o=(a(17),a(7)),c=a.n(o),u=a(8),p=a(10),h=(a(19),a(2)),l=a(3),d=a(5),m=a(4),y=a(11),f=a.n(y),g=a(12),j=a.n(g),b=a(0),x=j()(f.a),O=function(t){Object(d.a)(a,t);var e=Object(m.a)(a);function a(t){var r;return Object(h.a)(this,a),(r=e.call(this,t)).state={labels:[],label:null,xData:[],yData:[],dateData:[],chartData:{},options:{}},r}return Object(l.a)(a,[{key:"getMinOfArray",value:function(t){return Math.min.apply(null,t)}},{key:"getMaxOfArray",value:function(t){return Math.max.apply(null,t)}},{key:"componentDidMount",value:function(){var t=Math.round(this.getMinOfArray(this.props.yDataLeft)-1),e=Math.round(this.getMaxOfArray(this.props.yDataLeft)+1),a=Math.round(this.getMinOfArray(this.props.yDataRight)-1),r=Math.round(this.getMaxOfArray(this.props.yDataRight)+1);this.setState({options:{color:"#FFF",elements:{point:{radius:0}},responsive:!0,scales:{y:{type:"linear",position:"left",grid:{color:"rgba(255, 255, 255, 0.1)"},min:t,max:e,ticks:{display:!0,stepSize:.5,color:"rgba(255, 255, 255, 0.7)"}},y1:{type:"linear",position:"right",grid:{drawOnChartArea:!1},min:a,max:r,ticks:{display:!0,stepSize:.5,color:"rgba(255, 255, 255, 0.7)"}},x:{grid:{color:"rgba(255, 255, 255, 0.1)"},ticks:{display:!0,color:"rgba(255, 255, 255, 0.7)"}}}}})}},{key:"render",value:function(){return Object(b.jsxs)("div",{style:{width:"100%"},children:[this.props.title&&Object(b.jsx)("h1",{children:this.props.title}),Object(b.jsx)(x,{data:[{x:this.props.xData,y:this.props.yDataLeft,name:"Temperature",mode:"lines",hovertemplate:" %{y:.1f}&deg;C"},{x:this.props.xData,y:this.props.yDataRight,yaxis:"y2",name:"Humidity",mode:"lines",hovertemplate:" %{y:.0f}%"}],layout:{margin:{t:90,b:90,l:70,r:70,pad:10},responsive:"true",autosize:!0,legend:{orientation:"h",yanchor:"bottom",y:1.12,xanchor:"right",x:1},xaxis:{title:{text:"Date/Time"},autorange:"false",type:"date"},yaxis:{title:"Temperature (&deg;C)",automargin:!0},yaxis2:{title:"Humidity (%)",range:[0,100],overlaying:"y",side:"right",automargin:!0},hovermode:"x unified"}})]})}}]),a}(n.a.Component),v=(a(25),function(t){Object(d.a)(a,t);var e=Object(m.a)(a);function a(){return Object(h.a)(this,a),e.apply(this,arguments)}return Object(l.a)(a,[{key:"formatDate",value:function(t){return new Date(t).toLocaleTimeString([],{year:"numeric",month:"numeric",day:"numeric",hour:"2-digit",minute:"2-digit",timeZone:"UTC"})}},{key:"render",value:function(){return Object(b.jsxs)("div",{className:"card-container",children:[Object(b.jsxs)("span",{className:"card-container__temperature",children:[this.props.temperature,"\u2103"]}),Object(b.jsxs)("span",{className:"card-container__humidity",children:[this.props.humidity,"%"]}),Object(b.jsx)("span",{className:"card-container__date",children:this.formatDate(this.props.dateTime)})]})}}]),a}(n.a.Component));function D(){return(D=Object(p.a)(c.a.mark((function t(e){var a;return c.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,fetch(e,{mode:"cors"});case 2:return a=t.sent,t.abrupt("return",a);case 4:case"end":return t.stop()}}),t)})))).apply(this,arguments)}var M=function(){var t=new Date,e=new Date;e.setDate(e.getDate()+1),t.setDate(t.getDate()-1);var a=j(e),n=j(t),i="https://pi-sensor-rest-api.herokuapp.com/api/range?start=".concat(n,"&end=").concat(a),s=Object(r.useState)([]),o=Object(u.a)(s,2),c=o[0],p=o[1],h=Object(r.useState)(!1),l=Object(u.a)(h,2),d=l[0],m=l[1];function y(t){return t.map((function(t){return t.humidity}))}function f(t){return t.map((function(t){return t.temperature}))}function g(t){return t.map((function(t){return t.date}))}function j(t){var e=new Date(t),a=""+(e.getMonth()+1),r=""+e.getDate(),n=e.getFullYear();return a.length<2&&(a="0"+a),r.length<2&&(r="0"+r),[n,a,r].join("-")}return Object(r.useEffect)((function(){(function(t){return D.apply(this,arguments)})(i).then((function(t){return t.json()})).then((function(t){p(t),m(!0)})).catch((function(t){console.error(t),p({message:"Error retrieving data"}),m(!0)}))}),[]),Object(b.jsx)("div",{className:"App",children:Object(b.jsx)("div",{className:"charts-container",children:!1===d?Object(b.jsx)("h1",{children:"Loading..."}):c.message?Object(b.jsx)("h1",{children:c.message}):Object(b.jsxs)(b.Fragment,{children:[Object(b.jsx)(v,{dateTime:c[c.length-1].date,temperature:c[c.length-1].temperature,humidity:c[c.length-1].humidity}),Object(b.jsx)(O,{labelLeft:"Temperature (\u2103)",labelRight:"Humidity (%)",xData:g(c),yDataLeft:f(c),yDataRight:y(c),title:c[0].description})]})})})};s.a.render(Object(b.jsx)(n.a.StrictMode,{children:Object(b.jsx)(M,{})}),document.getElementById("root"))}},[[26,1,2]]]);
//# sourceMappingURL=main.bfc924d1.chunk.js.map