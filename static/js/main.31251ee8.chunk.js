(this["webpackJsonppi-sensor-chart"]=this["webpackJsonppi-sensor-chart"]||[]).push([[0],{22:function(t,e,a){},24:function(t,e,a){},29:function(t,e,a){},33:function(t,e,a){"use strict";a.r(e);var n=a(1),r=a.n(n),i=a(13),s=a.n(i),c=(a(22),a(10)),o=a.n(c),u=a(11),p=a(2),h=a(14),l=(a(24),a(5)),d=a(6),m=a(8),j=a(7),y=a(15),f=a.n(y),b=a(16),g=a.n(b),x=a(0),O=g()(f.a),D=function(t){Object(m.a)(a,t);var e=Object(j.a)(a);function a(t){var n;return Object(l.a)(this,a),(n=e.call(this,t)).state={labels:[],label:null,xData:[],yData:[],dateData:[],chartData:{},options:{}},n}return Object(d.a)(a,[{key:"getMinOfArray",value:function(t){return Math.min.apply(null,t)}},{key:"getMaxOfArray",value:function(t){return Math.max.apply(null,t)}},{key:"componentDidMount",value:function(){var t=Math.round(this.getMinOfArray(this.props.yDataLeft)-1),e=Math.round(this.getMaxOfArray(this.props.yDataLeft)+1),a=Math.round(this.getMinOfArray(this.props.yDataRight)-1),n=Math.round(this.getMaxOfArray(this.props.yDataRight)+1);this.setState({options:{color:"#FFF",elements:{point:{radius:0}},responsive:!0,scales:{y:{type:"linear",position:"left",grid:{color:"rgba(255, 255, 255, 0.1)"},min:t,max:e,ticks:{display:!0,stepSize:.5,color:"rgba(255, 255, 255, 0.7)"}},y1:{type:"linear",position:"right",grid:{drawOnChartArea:!1},min:a,max:n,ticks:{display:!0,stepSize:.5,color:"rgba(255, 255, 255, 0.7)"}},x:{grid:{color:"rgba(255, 255, 255, 0.1)"},ticks:{display:!0,color:"rgba(255, 255, 255, 0.7)"}}}}})}},{key:"render",value:function(){return Object(x.jsxs)("div",{style:{width:"100%"},children:[this.props.title&&Object(x.jsx)("h1",{children:this.props.title}),Object(x.jsx)(O,{data:[{x:this.props.xData,y:this.props.yDataLeft,name:"Temperature",mode:"lines",hovertemplate:" %{y:.1f}&deg;C"},{x:this.props.xData,y:this.props.yDataRight,yaxis:"y2",name:"Humidity",mode:"lines",hovertemplate:" %{y:.0f}%"}],layout:{margin:{t:90,b:90,l:70,r:70,pad:10},title:"Min: ".concat(this.props.minMaxValues.temperature.min,"&deg;C Max: ").concat(this.props.minMaxValues.temperature.max,"&deg;C"),autosize:!0,legend:{orientation:"h",yanchor:"bottom",y:1.12,xanchor:"right",x:1},xaxis:{title:{text:"Date/Time"},autorange:"false",type:"date"},yaxis:{title:"Temperature (&deg;C)",automargin:!0},yaxis2:{title:"Humidity (%)",range:[0,100],overlaying:"y",side:"right",automargin:!0},hovermode:"x unified"},useResizeHandler:!0,style:{width:"100%",height:"100%"}})]})}}]),a}(r.a.Component),v=(a(29),function(t){Object(m.a)(a,t);var e=Object(j.a)(a);function a(){return Object(l.a)(this,a),e.apply(this,arguments)}return Object(d.a)(a,[{key:"formatDate",value:function(t){return new Date(t).toLocaleTimeString([],{year:"numeric",month:"numeric",day:"numeric",hour:"2-digit",minute:"2-digit",timeZone:"UTC"})}},{key:"render",value:function(){return Object(x.jsxs)("div",{className:"card-container",children:[Object(x.jsxs)("span",{className:"card-container__temperature",children:[this.props.temperature,"\u2103"]}),Object(x.jsxs)("span",{className:"card-container__humidity",children:[this.props.humidity,"%"]}),Object(x.jsx)("span",{className:"card-container__date",children:this.formatDate(this.props.dateTime)})]})}}]),a}(r.a.Component)),M=(a(30),a(17)),w=a.n(M);function k(){return(k=Object(h.a)(o.a.mark((function t(e){var a;return o.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,fetch(e,{mode:"cors"});case 2:return a=t.sent,t.abrupt("return",a);case 4:case"end":return t.stop()}}),t)})))).apply(this,arguments)}var S=function(){var t=Object(n.useState)([]),e=Object(p.a)(t,2),a=e[0],r=e[1],i=Object(n.useState)({temperature:{min:0,max:0},humidity:{min:0,max:0}}),s=Object(p.a)(i,2),c=s[0],o=s[1],h=Object(n.useState)(!1),l=Object(p.a)(h,2),d=l[0],m=l[1],j=Object(n.useState)((new Date).setDate((new Date).getDate()-1)),y=Object(p.a)(j,2),f=y[0],b=y[1],g=Object(n.useState)((new Date).setDate((new Date).getDate()+1)),O=Object(p.a)(g,2),M=O[0],S=O[1],C=Object(n.useState)("https://pi-sensor-rest-api.herokuapp.com/api/range?start=".concat(E(f),"&end=").concat(E(M),"&desc=Bedroom")),A=Object(p.a)(C,2),N=A[0],T=A[1];function L(t){return t.map((function(t){return t.humidity}))}function R(t){return t.map((function(t){return t.temperature}))}function _(t){return t.map((function(t){return t.date}))}function E(t){var e=new Date(t),a=""+(e.getMonth()+1),n=""+e.getDate(),r=e.getFullYear();return a.length<2&&(a="0"+a),n.length<2&&(n="0"+n),[r,a,n].join("-")}function z(t,e,a){var n=t[0],r=t[0];2===t.length&&(n=t[1]),b(r),S(n),T("https://pi-sensor-rest-api.herokuapp.com/api/range?start=".concat(E(r),"&end=").concat(E(n)))}function F(){m(!1),function(t){return k.apply(this,arguments)}(N).then((function(t){return t.json()})).then((function(t){r(t),m(!0);var e=R(t),a=function(t){var e=1/0;return t.forEach((function(t){t<e&&(e=t)})),e}(e),n=function(t){var e=-1/0;return t.forEach((function(t){t>e&&(e=t)})),e}(e);o(Object(u.a)(Object(u.a)({},c),{},{temperature:{min:a,max:n}}))})).catch((function(t){console.error(t),r({message:"Error retrieving data"}),m(!0)}))}return Object(n.useEffect)((function(){F()}),[N]),Object(x.jsx)("div",{className:"App",children:Object(x.jsx)("div",{className:"app-container",children:!1===d?Object(x.jsx)("h1",{children:"Loading..."}):a.message?Object(x.jsx)("h1",{children:a.message}):Object(x.jsxs)("div",{className:"charts-container",children:[Object(x.jsx)("h1",{children:a[0].description}),Object(x.jsx)(v,{dateTime:a[a.length-1].date,temperature:a[a.length-1].temperature,humidity:a[a.length-1].humidity}),Object(x.jsx)(D,{labelLeft:"Temperature (\u2103)",labelRight:"Humidity (%)",xData:_(a),yDataLeft:R(a),yDataRight:L(a),title:" ",minMaxValues:c}),Object(x.jsxs)("div",{className:"date-control",children:[Object(x.jsx)("h2",{children:"Date"}),Object(x.jsx)(w.a,{value:[f,M],options:{maxDate:(new Date).setDate((new Date).getDate()+1),mode:"range"},onClose:z})]})]})})})};s.a.render(Object(x.jsx)(r.a.StrictMode,{children:Object(x.jsx)(S,{})}),document.getElementById("root"))}},[[33,1,2]]]);
//# sourceMappingURL=main.31251ee8.chunk.js.map