(this["webpackJsonppi-sensor-chart"]=this["webpackJsonppi-sensor-chart"]||[]).push([[0],{21:function(t,e,a){},23:function(t,e,a){},28:function(t,e,a){},32:function(t,e,a){"use strict";a.r(e);var n=a(1),r=a.n(n),i=a(12),s=a.n(i),c=(a(21),a(10)),o=a.n(c),u=a(2),p=a(13),h=(a(23),a(5)),l=a(6),d=a(8),m=a(7),j=a(14),y=a.n(j),g=a(15),f=a.n(g),b=a(0),O=f()(y.a),x=function(t){Object(d.a)(a,t);var e=Object(m.a)(a);function a(t){var n;return Object(h.a)(this,a),(n=e.call(this,t)).state={labels:[],label:null,xData:[],yData:[],dateData:[],chartData:{},options:{}},n}return Object(l.a)(a,[{key:"getMinOfArray",value:function(t){return Math.min.apply(null,t)}},{key:"getMaxOfArray",value:function(t){return Math.max.apply(null,t)}},{key:"componentDidMount",value:function(){var t=Math.round(this.getMinOfArray(this.props.yDataLeft)-1),e=Math.round(this.getMaxOfArray(this.props.yDataLeft)+1),a=Math.round(this.getMinOfArray(this.props.yDataRight)-1),n=Math.round(this.getMaxOfArray(this.props.yDataRight)+1);this.setState({options:{color:"#FFF",elements:{point:{radius:0}},responsive:!0,scales:{y:{type:"linear",position:"left",grid:{color:"rgba(255, 255, 255, 0.1)"},min:t,max:e,ticks:{display:!0,stepSize:.5,color:"rgba(255, 255, 255, 0.7)"}},y1:{type:"linear",position:"right",grid:{drawOnChartArea:!1},min:a,max:n,ticks:{display:!0,stepSize:.5,color:"rgba(255, 255, 255, 0.7)"}},x:{grid:{color:"rgba(255, 255, 255, 0.1)"},ticks:{display:!0,color:"rgba(255, 255, 255, 0.7)"}}}}})}},{key:"render",value:function(){return Object(b.jsxs)("div",{style:{width:"100%"},children:[this.props.title&&Object(b.jsx)("h1",{children:this.props.title}),Object(b.jsx)(O,{data:[{x:this.props.xData,y:this.props.yDataLeft,name:"Temperature",mode:"lines",hovertemplate:" %{y:.1f}&deg;C"},{x:this.props.xData,y:this.props.yDataRight,yaxis:"y2",name:"Humidity",mode:"lines",hovertemplate:" %{y:.0f}%"}],layout:{margin:{t:90,b:90,l:70,r:70,pad:10},responsive:"true",autosize:!0,legend:{orientation:"h",yanchor:"bottom",y:1.12,xanchor:"right",x:1},xaxis:{title:{text:"Date/Time"},autorange:"false",type:"date"},yaxis:{title:"Temperature (&deg;C)",automargin:!0},yaxis2:{title:"Humidity (%)",range:[0,100],overlaying:"y",side:"right",automargin:!0},hovermode:"x unified"}})]})}}]),a}(r.a.Component),D=(a(28),function(t){Object(d.a)(a,t);var e=Object(m.a)(a);function a(){return Object(h.a)(this,a),e.apply(this,arguments)}return Object(l.a)(a,[{key:"formatDate",value:function(t){return new Date(t).toLocaleTimeString([],{year:"numeric",month:"numeric",day:"numeric",hour:"2-digit",minute:"2-digit",timeZone:"UTC"})}},{key:"render",value:function(){return Object(b.jsxs)("div",{className:"card-container",children:[Object(b.jsxs)("span",{className:"card-container__temperature",children:[this.props.temperature,"\u2103"]}),Object(b.jsxs)("span",{className:"card-container__humidity",children:[this.props.humidity,"%"]}),Object(b.jsx)("span",{className:"card-container__date",children:this.formatDate(this.props.dateTime)})]})}}]),a}(r.a.Component)),v=(a(29),a(16)),M=a.n(v);function k(){return(k=Object(p.a)(o.a.mark((function t(e){var a;return o.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,fetch(e,{mode:"cors"});case 2:return a=t.sent,t.abrupt("return",a);case 4:case"end":return t.stop()}}),t)})))).apply(this,arguments)}var w=function(){var t=Object(n.useState)([]),e=Object(u.a)(t,2),a=e[0],r=e[1],i=Object(n.useState)(!1),s=Object(u.a)(i,2),c=s[0],o=s[1],p=Object(n.useState)((new Date).setDate((new Date).getDate()-1)),h=Object(u.a)(p,2),l=h[0],d=h[1],m=Object(n.useState)((new Date).setDate((new Date).getDate()+1)),j=Object(u.a)(m,2),y=j[0],g=j[1],f=Object(n.useState)("https://pi-sensor-rest-api.herokuapp.com/api/range?start=".concat(C(l),"&end=").concat(C(y))),O=Object(u.a)(f,2),v=O[0],w=O[1];function S(t){return t.map((function(t){return t.humidity}))}function A(t){return t.map((function(t){return t.temperature}))}function T(t){return t.map((function(t){return t.date}))}function C(t){var e=new Date(t),a=""+(e.getMonth()+1),n=""+e.getDate(),r=e.getFullYear();return a.length<2&&(a="0"+a),n.length<2&&(n="0"+n),[r,a,n].join("-")}function L(){o(!1),function(t){return k.apply(this,arguments)}(v).then((function(t){return t.json()})).then((function(t){r(t),o(!0)})).catch((function(t){console.error(t),r({message:"Error retrieving data"}),o(!0)}))}return Object(n.useEffect)((function(){L()}),[v]),Object(b.jsx)("div",{className:"App",children:Object(b.jsxs)("div",{className:"charts-container",children:[Object(b.jsxs)("div",{className:"date-control",children:[Object(b.jsx)("h2",{children:"Date"}),Object(b.jsx)(M.a,{value:[l,y],options:{maxDate:(new Date).setDate((new Date).getDate()+1),mode:"range"},onClose:function(t,e,a){var n=t[0],r=t[0];2===t.length&&(n=t[1]),console.log("Start: ".concat(r,", End: ").concat(n)),d(r),g(n),w("https://pi-sensor-rest-api.herokuapp.com/api/range?start=".concat(C(r),"&end=").concat(C(n)))}})]}),!1===c?Object(b.jsx)("h1",{children:"Loading..."}):a.message?Object(b.jsx)("h1",{children:a.message}):Object(b.jsxs)(b.Fragment,{children:[Object(b.jsx)(D,{dateTime:a[a.length-1].date,temperature:a[a.length-1].temperature,humidity:a[a.length-1].humidity}),Object(b.jsx)(x,{labelLeft:"Temperature (\u2103)",labelRight:"Humidity (%)",xData:T(a),yDataLeft:A(a),yDataRight:S(a),title:a[0].description})]})]})})};s.a.render(Object(b.jsx)(r.a.StrictMode,{children:Object(b.jsx)(w,{})}),document.getElementById("root"))}},[[32,1,2]]]);
//# sourceMappingURL=main.ad797251.chunk.js.map