(this["webpackJsonppi-sensor-chart"]=this["webpackJsonppi-sensor-chart"]||[]).push([[0],{183:function(t,e,a){},184:function(t,e,a){"use strict";a.r(e);var r=a(2),n=a.n(r),i=a(64),s=a.n(i),o=(a(73),a(42)),c=a.n(o),u=a(18),l=a(65),p=(a(75),a(0)),h=a(1),d=a(4),m=a(3),b=a(68),f=a(5),y=function(t){Object(d.a)(a,t);var e=Object(m.a)(a);function a(t){var r;return Object(p.a)(this,a),(r=e.call(this,t)).state={labels:[],label:null,xData:[],yData:[],dateData:[],chartData:{},options:{}},r}return Object(h.a)(a,[{key:"getMinOfArray",value:function(t){return Math.min.apply(null,t)}},{key:"getMaxOfArray",value:function(t){return Math.max.apply(null,t)}},{key:"componentDidMount",value:function(){var t=Math.round(this.getMinOfArray(this.props.yDataLeft)-1),e=Math.round(this.getMaxOfArray(this.props.yDataLeft)+1),a=Math.round(this.getMinOfArray(this.props.yDataRight)-1),r=Math.round(this.getMaxOfArray(this.props.yDataRight)+1);this.setState({options:{color:"#FFF",elements:{point:{radius:0}},responsive:!0,scales:{y:{type:"linear",position:"left",grid:{color:"rgba(255, 255, 255, 0.1)"},min:t,max:e,ticks:{display:!0,stepSize:.5,color:"rgba(255, 255, 255, 0.7)"}},y1:{type:"linear",position:"right",grid:{drawOnChartArea:!1},min:a,max:r,ticks:{display:!0,stepSize:.5,color:"rgba(255, 255, 255, 0.7)"}},x:{grid:{color:"rgba(255, 255, 255, 0.1)"},ticks:{display:!0,color:"rgba(255, 255, 255, 0.7)"}}}},chartData:{labels:this.props.xData,color:"#FFF",datasets:[{label:this.props.labelLeft,data:this.props.yDataLeft,fill:!1,backgroundColor:"#DFE1E1",borderColor:"#D8DBDC",color:"#FFF",tension:.1,yAxisID:"y"},{label:this.props.labelRight,position:"right",data:this.props.yDataRight,fill:!1,backgroundColor:"#0F0",borderColor:"#0F0",tension:.1,yAxisID:"y1"}]}})}},{key:"render",value:function(){return Object(f.jsxs)("div",{style:{width:"100%"},children:[this.props.title&&Object(f.jsx)("h1",{children:this.props.title}),Object(f.jsx)(b.a,{data:this.state.chartData,options:this.state.options})]})}}]),a}(n.a.Component),j=(a(183),function(t){Object(d.a)(a,t);var e=Object(m.a)(a);function a(){return Object(p.a)(this,a),e.apply(this,arguments)}return Object(h.a)(a,[{key:"formatDate",value:function(t){return new Date(t).toLocaleTimeString([],{year:"numeric",month:"numeric",day:"numeric",hour:"2-digit",minute:"2-digit",timeZone:"UTC"})}},{key:"render",value:function(){return Object(f.jsxs)("div",{className:"card-container",children:[Object(f.jsxs)("span",{className:"card-container__temperature",children:[this.props.temperature,"\u2103"]}),Object(f.jsxs)("span",{className:"card-container__humidity",children:[this.props.humidity,"%"]}),Object(f.jsx)("span",{className:"card-container__date",children:this.formatDate(this.props.dateTime)})]})}}]),a}(n.a.Component));function g(){return(g=Object(l.a)(c.a.mark((function t(e){var a;return c.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,fetch(e,{mode:"cors"});case 2:return a=t.sent,t.abrupt("return",a);case 4:case"end":return t.stop()}}),t)})))).apply(this,arguments)}function O(t){return t.map((function(t){return t.humidity}))}var x=function(){var t=Object(r.useState)([]),e=Object(u.a)(t,2),a=e[0],n=e[1],i=Object(r.useState)(!1),s=Object(u.a)(i,2),o=s[0],c=s[1];function l(t){return t.map((function(t){return t.temperature}))}function p(t){return t.map((function(t){return e=t.date,t.timezone," "+new Date(e).toLocaleTimeString("en-GB",{timeZone:"UTC"});var e}))}return Object(r.useEffect)((function(){(function(t){return g.apply(this,arguments)})("https://pi-sensor-rest-api.herokuapp.com/api/lastday").then((function(t){return t.json()})).then((function(t){n(t),c(!0)})).catch((function(t){console.error(t),n({message:"Error retrieving data"}),c(!0)}))}),[]),Object(f.jsx)("div",{className:"App",children:Object(f.jsx)("div",{className:"charts-container",children:!1===o?Object(f.jsx)("h1",{children:"Loading..."}):a.message?Object(f.jsx)("h1",{children:a.message}):Object(f.jsxs)(f.Fragment,{children:[Object(f.jsx)(j,{dateTime:a[a.length-1].date,temperature:a[a.length-1].temperature,humidity:a[a.length-1].humidity}),Object(f.jsx)(y,{labelLeft:"Temperature (\u2103)",labelRight:"Humidity (%)",xData:p(a),yDataLeft:l(a),yDataRight:O(a),title:a[0].description})]})})})};s.a.render(Object(f.jsx)(n.a.StrictMode,{children:Object(f.jsx)(x,{})}),document.getElementById("root"))},73:function(t,e,a){},75:function(t,e,a){}},[[184,1,2]]]);
//# sourceMappingURL=main.a0970d14.chunk.js.map